<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>AI MARKETING | 3 Cups</title>

<style>
:root{
  --bg:#0b1020;
  --panel:#101a33;
  --panel2:#0e1730;
  --text:#e8ecff;
  --muted:#b8c0e6;
  --brand:#7c5cff;
  --brand2:#22d3ee;
  --border: rgba(255,255,255,.12);
  --shadow: 0 20px 60px rgba(0,0,0,.45);
  --radius: 18px;
  --ok:#22c55e;
  --warn:#f59e0b;
  --bad:#ef4444;
  --max:1100px;
}
*{box-sizing:border-box}

html, body{
  height:100%;
  overflow:hidden;
  overscroll-behavior:none;
  touch-action:manipulation;
}

body{
  margin:0;
  font-family: system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
  background: radial-gradient(1200px 600px at 80% -10%, rgba(124,92,255,.35), transparent 55%),
              radial-gradient(1000px 600px at 20% 10%, rgba(34,211,238,.22), transparent 55%),
              var(--bg);
  color:var(--text);
}

/* ===== HEADER ===== */
header{
  position:sticky; top:0; z-index:20;
  backdrop-filter: blur(10px);
  background: rgba(11,16,32,.65);
  border-bottom:1px solid var(--border);
}
.wrap{max-width:var(--max); margin:0 auto; padding:16px;}
.nav{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;}

.brand{display:flex; align-items:center; gap:10px; font-weight:900; text-decoration:none;}
.logo{
  width:38px; height:38px; border-radius:12px;
  background: linear-gradient(135deg, var(--brand), var(--brand2));
  box-shadow: 0 12px 30px rgba(124,92,255,.25);
}

.pill{
  font-size:12px; font-weight:900;
  padding:7px 10px; border-radius:999px;
  border:1px solid var(--border);
  background: rgba(255,255,255,.04);
}

/* ===== LAYOUT ===== */
.grid{
  max-width:var(--max);
  margin:0 auto;
  padding:16px;
  display:grid;
  grid-template-columns: 1.1fr .9fr;
  gap:14px;
}
.card{
  background: linear-gradient(180deg, rgba(16,26,51,.95), rgba(14,23,48,.92));
  border:1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: 16px;
}

/* ===== STAGE ===== */
.stage{
  margin-top:14px;
  perspective: 980px;
  position: relative;
  height: 260px;
  border-radius:16px;
  overflow:hidden;
  background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(0,0,0,.20));
  border:1px solid rgba(255,255,255,.08);
}

.cups3d{
  position:absolute;
  inset:0;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  gap:18px;
  padding-bottom:24px;
}

/* simplified cups for performance */
.cup3d{
  width:120px;
  height:150px;
  border-radius:18px;
  background: linear-gradient(180deg, rgba(255,255,255,.15), rgba(0,0,0,.3));
  border:1px solid rgba(255,255,255,.2);
  box-shadow: 0 20px 50px rgba(0,0,0,.6);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:1000;
  cursor:pointer;
  transition:.25s ease;
}
.cup3d.disabled{opacity:.6; pointer-events:none}
.cup3d:hover{transform:translateY(-6px)}

.cup3d.win{border-color: rgba(34,197,94,.6); background: rgba(34,197,94,.18)}
.cup3d.lose{border-color: rgba(239,68,68,.6); background: rgba(239,68,68,.18)}

.coin{
  width:60px;height:60px;border-radius:50%;
  background: linear-gradient(135deg, gold, orange);
  box-shadow:0 0 30px rgba(255,200,0,.6);
  display:none;
}
.cup3d.showCoin .coin{display:block}

/* ===== UI ===== */
.field{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  background: rgba(0,0,0,.20);
  color:var(--text);
}

.btn{
  padding:12px 14px;
  border-radius:14px;
  border:1px solid var(--border);
  background: rgba(255,255,255,.06);
  color:var(--text);
  font-weight:900;
  cursor:pointer;
}
.btn.primary{
  background: linear-gradient(135deg, var(--brand), var(--brand2));
}
.btn.danger{background: rgba(239,68,68,.2)}

@media (max-width: 900px){
  .grid{grid-template-columns:1fr;}
}
</style>
</head>

<body>

<header>
  <div class="wrap nav">
    <a class="brand" href="gamecenter.html">
      <div class="logo"></div>
      <div>AI MARKETING<br><small>3 Cups</small></div>
    </a>
    <span class="pill" id="balPill">Balance: $0.00</span>
  </div>
</header>

<div class="grid">
  <section class="card">
    <h3>3 Cups</h3>
    <div id="statusText">Ready</div>
    <div id="hintText" style="color:#b8c0e6">Press Start Round</div>

    <div class="stage">
      <div class="cups3d">
        <div class="cup3d disabled" id="cup1" onclick="pick(1)"><div class="coin"></div></div>
        <div class="cup3d disabled" id="cup2" onclick="pick(2)"><div class="coin"></div></div>
        <div class="cup3d disabled" id="cup3" onclick="pick(3)"><div class="coin"></div></div>
      </div>
    </div>
  </section>

  <aside class="card">
    <label>Bet Amount</label>
    <input class="field" id="bet" type="number" min="1" value="10" />

    <div style="margin-top:12px">
      <button class="btn primary" id="startBtn" onclick="startRound()">START ROUND</button>
      <button class="btn danger" onclick="resetRound()">RESET</button>
    </div>
  </aside>
</div>

<script>
/* ===== BALANCE ===== */
const LS_BAL="aimkt_balance_usd";
function money(x){return "$"+Number(x).toFixed(2);}
function getBalance(){return Number(localStorage.getItem(LS_BAL)||0);}
function setBalance(v){localStorage.setItem(LS_BAL,v); renderBalance();}
function renderBalance(){balPill.textContent="Balance: "+money(getBalance());}
if(!getBalance()) setBalance(500);

/* ===== GAME ===== */
const state={
  inRound:false,
  bet:0,
  winCup:1
};

function setStatus(t){ statusText.textContent=t; }
function setHint(t){ hintText.textContent=t; }

function lockCups(lock){
  [1,2,3].forEach(i=>{
    document.getElementById("cup"+i).classList.toggle("disabled", lock);
  });
}

function resetCups(){
  [1,2,3].forEach(i=>{
    const el=document.getElementById("cup"+i);
    el.className="cup3d disabled";
  });
}

function startRound(){
  if(state.inRound){
    setStatus("Round already running");
    return;
  }
  const b=Number(bet.value||0);
  if(b<=0){
    setStatus("Enter bet amount");
    return;
  }
  if(b>getBalance()){
    setStatus("Insufficient balance");
    return;
  }

  setBalance(getBalance()-b);
  state.bet=b;
  state.inRound=true;
  state.winCup=1+Math.floor(Math.random()*3);

  resetCups();
  lockCups(false);

  setStatus("Pick a cup");
  setHint("Choose wisely...");
}

function pick(i){
  if(!state.inRound){
    setStatus("Press Start Round first");
    return;
  }

  lockCups(true);

  [1,2,3].forEach(n=>{
    const el=document.getElementById("cup"+n);
    if(n===state.winCup){
      el.classList.add("showCoin");
    }
    if(n===i && n===state.winCup){
      el.classList.add("win");
    }else if(n===i){
      el.classList.add("lose");
    }
  });

  if(i===state.winCup){
    const win=state.bet*2;
    setBalance(getBalance()+win);
    setStatus("WIN ✅ Paid x2");
    setHint("You won "+money(win));
  }else{
    setStatus("LOST ❌");
    setHint("Wrong cup!");
  }

  state.inRound=false;
}

function resetRound(){
  state.inRound=false;
  state.bet=0;
  resetCups();
  lockCups(true);
  setStatus("Ready");
  setHint("Press Start Round");
}

/* INIT */
renderBalance();
resetRound();
</script>

</body>
</html>
