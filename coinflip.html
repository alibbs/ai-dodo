<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AI MARKETING | Coinflip</title>

<style>
:root{
  --bg:#0b1020; --panel:#101a33;
  --text:#e8ecff; --muted:#b8c0e6;
  --brand:#7c5cff; --brand2:#22d3ee;
  --border: rgba(255,255,255,.12);
  --shadow: 0 20px 60px rgba(0,0,0,.45);
  --ok:#22c55e; --bad:#ef4444;
}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui;background:#0b1020;color:#fff;}
header{position:sticky;top:0;background:rgba(11,16,32,.8);border-bottom:1px solid var(--border);}
.wrap{max-width:480px;margin:0 auto;padding:12px;}
.nav{display:flex;justify-content:space-between;align-items:center;}
.btnTop{padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:#fff;text-decoration:none;font-weight:800;}

.card{margin:12px auto;max-width:480px;background:linear-gradient(180deg, rgba(16,26,51,.95), rgba(14,23,48,.92));border:1px solid var(--border);border-radius:18px;padding:14px;box-shadow:var(--shadow);}

.coinStage{position:relative;display:grid;place-items:center;min-height:240px;border-radius:16px;border:1px solid rgba(255,255,255,.08);background:linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.22));}

.resultBadge{
  position:absolute; top:12px;
  padding:6px 12px; border-radius:999px;
  font-weight:900; font-size:13px;
  opacity:0; transform:translateY(-10px);
  transition:.25s ease;
}
.resultBadge.win{background:rgba(34,197,94,.2); border:1px solid rgba(34,197,94,.8); color:#22c55e;}
.resultBadge.lose{background:rgba(239,68,68,.2); border:1px solid rgba(239,68,68,.8); color:#ef4444;}
.resultBadge.show{opacity:1; transform:translateY(0);}

.coin3d{width:150px;height:150px;position:relative;transform-style:preserve-3d;}
.coin3d.idle{animation:spin 4s linear infinite;}
@keyframes spin{from{transform:rotateY(0) rotateX(10deg)}to{transform:rotateY(360deg) rotateX(10deg)}}
.coin3d.flipping{animation:flip 1s ease 1;}
@keyframes flip{from{transform:rotateY(0) rotateX(10deg)}to{transform:rotateY(1440deg) rotateX(10deg)}}

.coinFace{position:absolute;inset:0;border-radius:999px;backface-visibility:hidden;display:grid;place-items:center;font-weight:900;font-size:44px;}
.gold{background:linear-gradient(135deg,#f7e08c,#caa03a);}
.silver{background:linear-gradient(135deg,#f3f6ff,#8a93ad);}
.faceGold{transform:translateZ(8px);}
.faceSilver{transform:rotateY(180deg) translateZ(8px);}

.progressBox{
  margin-top:10px;padding:12px;border-radius:14px;
  background:rgba(34,197,94,.15);
  border:1px solid rgba(34,197,94,.6);
  text-align:center;font-weight:900;
}

.field{width:100%;padding:12px;border-radius:14px;border:1px solid var(--border);background:rgba(0,0,0,.25);color:#fff;}
.btn{width:100%;padding:14px;border-radius:14px;border:1px solid var(--border);background:rgba(255,255,255,.06);color:#fff;font-weight:900;}
.btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand2));}
.twoCol{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px;}
.kpi{margin-top:8px;font-size:13px;color:#b8c0e6}
</style>
</head>

<body>

<header>
  <div class="wrap nav">
    <a href="gamecenter.html" class="btnTop">‚Ü© Game Center</a>
    <div id="balPill">Balance: $0.00</div>
  </div>
</header>

<div class="card">
  <div class="coinStage">
    <div class="resultBadge" id="resultBadge">‚Äî</div>

    <div class="coin3d idle" id="coin3d">
      <div class="coinFace gold faceGold">G</div>
      <div class="coinFace silver faceSilver">S</div>
    </div>
  </div>

  <div class="progressBox" id="progressBox">
    Round: 0 / 20<br>
    Multiplier: x1.93
  </div>
</div>

<div class="card">
  <label>Bet Amount</label>
  <input class="field" id="bet" type="number" min="1" placeholder="10" />

  <button class="btn primary" style="margin-top:10px;" onclick="startGame()">üéÆ Start (Place Bet)</button>

  <div class="twoCol">
    <button class="btn primary" onclick="chooseSide('G')">Gold</button>
    <button class="btn primary" onclick="chooseSide('S')">Silver</button>
  </div>

  <button class="btn" style="margin-top:10px;" onclick="cashOut()">üí∞ Cash Out</button>

  <div class="kpi" id="statusText">Enter bet and press Start...</div>
</div>

<script>
/* ===== Balance ===== */
const LS_BAL="aimkt_balance_usd";
function money(x){return "$"+Number(x).toFixed(2);}
function getBalance(){return Number(localStorage.getItem(LS_BAL)||0);}
function setBalance(v){localStorage.setItem(LS_BAL,v); renderBalance();}
function renderBalance(){balPill.textContent="Balance: "+money(getBalance());}
if(!getBalance()) setBalance(500);

/* ===== Sound ===== */
let AC=null;
function audio(){
  if(!AC){
    const Ctx=window.AudioContext||window.webkitAudioContext;
    AC=new Ctx();
  }
  if(AC.state==="suspended") AC.resume();
  return AC;
}
function beep(freq=600, dur=0.1, vol=0.12){
  const ac=audio();
  const o=ac.createOscillator();
  const g=ac.createGain();
  o.frequency.value=freq;
  o.type="sine";
  g.gain.value=vol;
  o.connect(g); g.connect(ac.destination);
  o.start();
  setTimeout(()=>o.stop(), dur*1000);
}
function sndStart(){beep(600,0.12); setTimeout(()=>beep(900,0.12),120);}
function sndFlip(){beep(400,0.08); setTimeout(()=>beep(700,0.08),80);}
function sndWin(){beep(900,0.12); setTimeout(()=>beep(1200,0.12),120);}
function sndLose(){beep(200,0.25);}

/* ===== Game ===== */
const coin=document.getElementById("coin3d");
const badge=document.getElementById("resultBadge");
const MAX_ROUNDS=20;

function getMultiplier(round){
  const min = 1.93;
  const max = 777;
  const t = round / MAX_ROUNDS;
  return min + (max - min) * Math.pow(t, 3);
}

const game={active:false, bet:0, side:null, round:0, multiplier:1.93};

function showBadge(text, type){
  badge.textContent = text;
  badge.className = "resultBadge " + type + " show";
  setTimeout(()=>{ badge.className = "resultBadge"; }, 900);
}

function updateProgress(){
  progressBox.innerHTML = `Round: ${game.round} / ${MAX_ROUNDS}<br>Multiplier: x${game.multiplier.toFixed(2)}`;
}

function resetGame(){
  game.active=false; game.bet=0; game.side=null; game.round=0; game.multiplier=1.93;
  statusText.textContent="Enter bet and press Start...";
  updateProgress();
  coin.className="coin3d idle";
}

function startGame(){
  const b=Number(bet.value||0);
  if(b<=0 || b>getBalance()) return alert("Invalid bet");
  setBalance(getBalance()-b);
  game.bet=b; game.active=true; game.round=0; game.multiplier=1.93;
  sndStart();
  statusText.textContent="Choose Gold or Silver...";
  updateProgress();
}

function chooseSide(side){
  if(!game.active) return alert("Press Start first");
  game.side=side;
  flipOnce();
}

function flipOnce(){
  game.round++;
  game.multiplier=getMultiplier(game.round);
  sndFlip();
  statusText.textContent="Flipping...";
  updateProgress();

  coin.classList.remove("flipping");
  void coin.offsetWidth;
  coin.classList.add("flipping");

  setTimeout(()=>{
    const res=Math.random()<0.5?"G":"S";
    coin.style.transform=`rotateY(${res==="G"?0:180}deg) rotateX(10deg)`;

    if(res!==game.side){
      sndLose();
      showBadge("LOSE","lose");
      statusText.textContent="‚ùå You lost!";
      resetGame();
      return;
    }

    sndWin();
    showBadge("WIN","win");

    if(game.round>=MAX_ROUNDS){
      statusText.textContent="üèÜ Max rounds reached! Cash out!";
      return;
    }

    statusText.textContent="‚úÖ Win! Choose side for next round...";
  },1000);
}

function cashOut(){
  if(!game.active || game.round===0) return;
  const win = game.bet * game.multiplier;
  setBalance(getBalance() + win);
  alert("Cashed out: " + money(win));
  resetGame();
}

renderBalance();
resetGame();
</script>

</body>
</html>
